# Git GUI 桌面端 MVP 计划

## 项目概述
开发一个基于 Flutter 的 Git GUI 桌面应用程序，提供直观的图形界面来管理 Git 仓库。

## MVP 核心功能（最小可行产品）

### 阶段 1：基础功能（1-2周）

#### 1.1 仓库选择与打开
- [ ] 选择本地 Git 仓库目录
- [ ] 验证是否为有效的 Git 仓库
- [ ] 显示仓库基本信息（当前分支、远程地址等）

#### 1.2 文件状态查看
- [ ] 显示工作区文件状态（已修改、已添加、未跟踪、已删除）
- [ ] 文件列表视图（树形结构）
- [ ] 文件差异预览（diff 视图）

#### 1.3 基础 Git 操作
- [ ] **暂存文件**（git add）
- [ ] **取消暂存**（git reset）
- [ ] **提交更改**（git commit）
  - 提交信息输入
  - 提交按钮
- [ ] **刷新状态**（手动刷新按钮）

### 阶段 2：分支管理（1周）

#### 2.1 分支查看
- [ ] 显示所有本地分支
- [ ] 显示当前分支（高亮）
- [ ] 显示远程分支（可选）

#### 2.2 分支操作
- [ ] **切换分支**（git checkout）
- [ ] **创建新分支**（git branch）
- [ ] **删除分支**（git branch -d）

### 阶段 3：提交历史（1周）

#### 3.1 提交历史视图
- [ ] 显示提交历史列表（git log）
- [ ] 显示提交信息（作者、日期、提交信息）
- [ ] 点击查看提交详情

#### 3.2 提交详情
- [ ] 显示提交的文件变更
- [ ] 显示文件差异

## 技术栈

### 核心依赖
- **Flutter SDK**: 3.10.3+（已配置）
- **Git 命令执行**: `process` 包（Dart 内置）
- **文件系统**: `path_provider` 用于获取系统路径
- **UI 组件**: Flutter Material Design

### 推荐依赖包
```yaml
dependencies:
  flutter:
    sdk: flutter
  # Git 操作相关
  git: ^9.0.0  # Dart Git 库（可选，也可以直接调用系统 Git）
  # 文件选择
  file_picker: ^8.0.0  # 选择文件夹
  # 状态管理（可选）
  provider: ^6.1.0  # 状态管理
  # UI 增强
  flutter_markdown: ^0.6.0  # Markdown 渲染（用于 diff 显示）
```

## 项目结构建议

```
lib/
├── main.dart                 # 应用入口
├── models/                   # 数据模型
│   ├── git_repository.dart
│   ├── git_file_status.dart
│   └── git_commit.dart
├── services/                 # 业务逻辑
│   └── git_service.dart     # Git 命令封装
├── screens/                  # 页面
│   ├── repository_selector.dart
│   ├── main_screen.dart
│   └── commit_history_screen.dart
├── widgets/                  # 可复用组件
│   ├── file_list_view.dart
│   ├── diff_viewer.dart
│   └── commit_form.dart
└── utils/                    # 工具类
    └── git_parser.dart
```

## UI 设计建议

### 主界面布局
```
┌─────────────────────────────────────────┐
│  [仓库路径] [刷新] [分支选择▼]          │
├──────────┬──────────────────────────────┤
│          │                              │
│ 文件列表 │     文件差异预览              │
│          │                              │
│ [未暂存] │                              │
│  file1   │                              │
│  file2   │                              │
│          │                              │
│ [已暂存] │                              │
│  file3   │                              │
│          │                              │
├──────────┴──────────────────────────────┤
│ 提交信息: [________________]            │
│ [取消暂存] [暂存] [提交]                │
└─────────────────────────────────────────┘
```

## 开发优先级

### 必须实现（MVP 核心）
1. ✅ 选择/打开 Git 仓库
2. ✅ 查看文件状态
3. ✅ 暂存/取消暂存文件
4. ✅ 提交更改
5. ✅ 查看提交历史

### 可选功能（后续迭代）
- 推送/拉取远程仓库
- 合并分支
- 解决冲突
- 撤销操作
- 搜索功能
- 主题切换

## 开发里程碑

### 里程碑 1：基础框架（3-5天）
- 项目结构搭建
- Git 服务封装
- 基础 UI 布局

### 里程碑 2：文件管理（3-5天）
- 文件状态检测
- 文件列表显示
- 暂存/取消暂存功能

### 里程碑 3：提交功能（2-3天）
- 提交表单
- 提交执行
- 状态刷新

### 里程碑 4：分支与历史（3-5天）
- 分支管理
- 提交历史查看
- 提交详情

## 测试计划

### 单元测试
- Git 命令解析
- 文件状态解析
- 提交信息验证

### 集成测试
- 完整的提交流程
- 分支切换流程

## 已知挑战

1. **Git 命令执行**
   - 需要处理不同操作系统的路径差异
   - 错误处理和异常情况

2. **性能优化**
   - 大型仓库的文件列表加载
   - Diff 渲染性能

3. **用户体验**
   - 操作反馈（加载状态）
   - 错误提示

## 下一步行动

1. 安装必要的依赖包
2. 创建项目基础结构
3. 实现 Git 服务封装
4. 搭建主界面 UI
5. 逐步实现核心功能
